<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js" integrity="sha512-DZqqY3PiOvTP9HkjIWgjO6ouCbq+dxqWoJZ/Q+zPYNHmlnI2dQnbJ5bxAHpAMw+LXRm4D72EIRXzvcHQtE8/VQ==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css"> 
    <title>Prueba front Lexart Labs - Mostrar productos</title>
</head>
<body>
    
    <table>
		<thead> 
            <tr>
                <th>ABM Stock </th>
            </tr>
			<tr >
				<th>_id</th>
                <th>Quantity</th>
                <th>Product_Name</th>
                <th>Price</th>

			</tr>
		</thead>
		<tbody>
        </tbody>
    </table>

    <script type="text/javascript">
    const API = 'https://crudcrud.com/api/eb5bbac8a8fc41a296f7a59b531ffda1/stock'
    let item = 0;
    let tbody = document.querySelector('tbody');
    let productosSeleccionados = [];
        console.log(API)
        
		axios.get(API).then( function (response){
			let tr = ``
            let stock = response.data;
            
            console.log(response.data)
			for (let i = stock.length - 1; i >= 0; i--) {
                let producto = stock[i];
                item = i    ;
				tr += `
					<tr>
						<td>${producto._id}</td>
                        <td>${producto.cantidad}</td>
                        <td>${producto.nombre}</td>
                        <td>${producto.precio}</td>
			            <td>
				            <button onclick="seleccionar(${item})"> Select </button>
                        </td>
                        <td>
				            <button onclick="eliminar(${item})"> Delet </button>
                        </td>
                    </tr>
                    
                `   
                console.log(item)

			}
            tbody.innerHTML = tr;

			console.log("stock: ", stock)

		}).catch( function (error){
			console.log("error: ", error)
        })
        
        function seleccionar (indiceobjeto) {
            console.log(indiceobjeto)
            axios.get(API).then( function (response) {
                let stock2 = response.data
            let productoSeleccionado = stock2[indiceobjeto]
            console.log(productoSeleccionado)
            productosSeleccionados.push(
                { _id :productoSeleccionado._id, 
                cantidad : productoSeleccionado.cantidad, 
                nombre : productoSeleccionado.nombre,
                precio : productoSeleccionado.precio,
                active: productoSeleccionado.active});
                
            console.log(productosSeleccionados)
            })

        }
        function eliminar (indiceobjeto) {
            console.log(indiceobjeto)
            axios.get(API).then( function (response) {
                let stock2 = response.data
                let productoEliminado = stock2[indiceobjeto]
                console.log(productoEliminado)
            })
        }

    
    </script>
    
</body>
</html>